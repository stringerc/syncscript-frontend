/**
 * Responsive Audit Fixes
 * Addresses overlap, touch targets, and viewport issues
 */

/* Minimum touch target sizes (WCAG 2.2 AA) */
button,
a,
input[type="button"],
input[type="submit"],
input[type="checkbox"],
input[type="radio"],
[role="button"],
[role="link"] {
  min-width: 44px;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-center;
}

/* Small buttons need padding */
.button-sm,
.icon-button {
  min-width: 44px !important;
  min-height: 44px !important;
  padding: 8px !important;
}

/* Mobile viewport fixes */
@media (max-width: 640px) {
  /* Prevent horizontal scroll */
  html, body {
    overflow-x: hidden;
    max-width: 100vw;
  }
  
  /* Typography for mobile */
  body {
    font-size: 16px; /* Prevents iOS zoom on focus */
  }
  
  /* Modal/drawer full width on mobile */
  [role="dialog"] {
    width: 100% !important;
    max-width: 100vw !important;
  }
  
  /* Bottom navigation safe area */
  .bottom-nav,
  .fab-container {
    padding-bottom: env(safe-area-inset-bottom, 16px);
  }
  
  /* Floating action buttons - prevent overlap */
  .floating-action-button {
    bottom: calc(24px + env(safe-area-inset-bottom, 0px)) !important;
  }
  
  .global-navigation {
    bottom: calc(24px + env(safe-area-inset-bottom, 0px)) !important;
  }
  
  /* Card spacing */
  .card {
    margin: 12px;
  }
  
  /* Full-width buttons on mobile */
  .button-block-mobile {
    width: 100%;
    display: block;
  }
  
  /* Stack buttons vertically */
  .button-group {
    flex-direction: column;
    gap: 12px;
  }
  
  /* Larger tap targets for mobile */
  input,
  select,
  textarea {
    min-height: 48px;
    font-size: 16px; /* Prevents zoom */
  }
}

/* Small mobile (iPhone SE) */
@media (max-width: 375px) {
  /* Reduce padding on small screens */
  .container {
    padding-left: 12px;
    padding-right: 12px;
  }
  
  /* Smaller text on tiny screens */
  h1 {
    font-size: 1.75rem;
  }
  
  h2 {
    font-size: 1.5rem;
  }
}

/* Tablet */
@media (min-width: 641px) and (max-width: 1024px) {
  /* Two-column layout */
  .grid-cols-1 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  /* Side-by-side buttons */
  .button-group {
    flex-direction: row;
  }
}

/* Desktop */
@media (min-width: 1025px) {
  /* Multi-column layouts */
  .grid-responsive {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  }
}

/* Safe area insets for notch/island devices */
@supports (padding: env(safe-area-inset-top)) {
  .header {
    padding-top: calc(16px + env(safe-area-inset-top));
  }
  
  .sidebar {
    padding-left: env(safe-area-inset-left);
  }
  
  .footer {
    padding-bottom: calc(16px + env(safe-area-inset-bottom));
  }
}

/* Landscape mode on mobile */
@media (max-height: 500px) and (orientation: landscape) {
  /* Reduce header height */
  .header {
    height: 48px;
  }
  
  /* Make modals scrollable */
  [role="dialog"] {
    max-height: 90vh;
    overflow-y: auto;
  }
}

/* Prevent text size adjust on iOS */
html {
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}

/* Smooth scrolling on mobile */
@media (hover: none) and (pointer: coarse) {
  * {
    -webkit-overflow-scrolling: touch;
  }
}

/* Fix sticky positioning on iOS */
.sticky {
  position: -webkit-sticky;
  position: sticky;
}

/* Foldable device support */
@media (horizontal-viewport-segments: 2) {
  .container {
    grid-template-columns: env(viewport-segment-width 0 0) env(viewport-segment-width 1 0);
  }
}

